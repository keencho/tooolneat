<!DOCTYPE html>
<html lang="ko">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8846557285079359"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>개행문자 변환기 - Toolneat</title>
  <meta name="description" content="텍스트 파일의 줄바꿈 문자를 변환하는 온라인 도구입니다. CRLF(Windows), LF(Unix/Linux/Mac), CR(구형 Mac) 형식 간 변환을 지원합니다. 운영체제 간 파일 호환성 문제를 해결하고, Git 줄바꿈 설정 확인에 활용됩니다.">

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://toolneat.com/tools/dev/line-ending/">
  <link rel="alternate" hreflang="ko" href="https://toolneat.com/tools/dev/line-ending/">
  <link rel="alternate" hreflang="en" href="https://toolneat.com/en/tools/dev/line-ending/">
  <link rel="alternate" hreflang="x-default" href="https://toolneat.com/tools/dev/line-ending/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Toolneat">
  <meta property="og:title" content="개행문자 변환기 - Toolneat">
  <meta property="og:description" content="CRLF, LF 등 개행문자를 변환합니다.">
  <meta property="og:url" content="https://toolneat.com/tools/dev/line-ending/">
  <meta property="og:image" content="https://toolneat.com/assets/images/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#2563eb">

  <!-- Favicon -->
  <!-- CSS -->
    <link rel="icon" href="/favicon.ico" sizes="48x48">
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="stylesheet" href="../../../assets/css/output.css">

  <!-- JS -->
  <script src="../../../assets/js/common.js"></script>
  <script src="../../../assets/js/i18n.js"></script>
  <script src="../../../assets/js/components.js"></script>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <div id="header"></div>

  <!-- Main Content -->
  <main class="flex-1 py-8 md:py-12">
    <div class="container-main">
      <!-- Page Title -->
      <div class="mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2">
          개행문자 변환기
        </h1>
        <p class="text-gray-600 dark:text-gray-400">
          CRLF, LF 등 개행문자를 변환합니다. Windows, Unix/Linux/Mac, Old Mac 형식 간 변환을 지원합니다.
        </p>
      </div>

      <!-- Ad Container (Top) -->
      <div class="ad-container mb-6">

      </div>

      <!-- Tool Card -->
      <div class="card">
        <!-- Stats Bar -->
        <div class="flex flex-wrap items-center gap-4 mb-4 pb-4 border-b border-gray-100 dark:border-gray-700">
          <div class="flex items-center gap-2">
            <span class="text-sm text-gray-500 dark:text-gray-400">현재 형식:</span>
            <span id="current-format" class="px-2 py-0.5 text-sm font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">-</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-sm text-gray-500 dark:text-gray-400">줄 수:</span>
            <span id="line-count" class="text-sm font-medium text-gray-700 dark:text-gray-300">0</span>
          </div>
          <div class="ml-auto">
            <button id="detect-btn" class="btn btn-secondary text-sm py-1.5 px-3">형식 감지</button>
          </div>
        </div>

        <!-- Input Section -->
        <div class="mb-4">
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">입력</span>
            <div class="flex items-center gap-2">
              <label class="text-xs text-blue-600 dark:text-blue-400 hover:underline cursor-pointer">
                <input type="file" id="file-input" accept=".txt,.csv,.json,.xml,.html,.css,.js,.ts,.md,.log,.sh,.bat,.py,.java,.c,.cpp,.h" class="hidden">
                파일 불러오기
              </label>
              <span id="input-size" class="text-xs text-gray-400"></span>
            </div>
          </div>
          <textarea
            id="input-text"
            class="textarea min-h-[200px] font-mono text-sm"
            placeholder="변환할 텍스트를 입력하세요..."
          ></textarea>
          <!-- Browser limitation note -->
          <div class="mt-2 p-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg">
            <p class="text-xs text-amber-700 dark:text-amber-400">
              <strong>참고:</strong> 브라우저 특성상 붙여넣기는 자동으로 LF로 변환됩니다. CRLF/CR 테스트는 <strong>파일 불러오기</strong> 또는 아래 <strong>샘플 버튼</strong>을 이용하세요.
            </p>
          </div>
          <!-- Sample buttons for testing -->
          <div class="flex flex-wrap items-center gap-2 mt-2">
            <span class="text-xs text-gray-500 dark:text-gray-400">테스트 샘플:</span>
            <button id="sample-lf" class="text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/50">LF 샘플</button>
            <button id="sample-crlf" class="text-xs px-2 py-1 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50">CRLF 샘플</button>
            <button id="sample-cr" class="text-xs px-2 py-1 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 hover:bg-purple-200 dark:hover:bg-purple-900/50">CR 샘플</button>
            <button id="sample-mixed" class="text-xs px-2 py-1 rounded bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-900/50">Mixed 샘플</button>
          </div>
        </div>

        <!-- Convert Options -->
        <div class="flex flex-wrap items-center gap-3 mb-4">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-300">변환:</span>
          <button id="convert-lf" class="btn btn-primary text-sm py-1.5 px-3">LF (Unix/Linux/Mac)</button>
          <button id="convert-crlf" class="btn btn-secondary text-sm py-1.5 px-3">CRLF (Windows)</button>
          <button id="convert-cr" class="btn btn-secondary text-sm py-1.5 px-3">CR (Old Mac)</button>
          <button id="clear-btn" class="btn btn-secondary text-sm py-1.5 px-3 ml-auto">지우기</button>
        </div>

        <!-- Output Section -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">출력</span>
            <div class="flex items-center gap-2">
              <span id="output-format" class="px-2 py-0.5 text-xs font-medium rounded bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hidden">-</span>
              <span id="output-size" class="text-xs text-gray-400"></span>
              <button id="copy-btn" class="text-xs text-blue-600 dark:text-blue-400 hover:underline">복사</button>
            </div>
          </div>
          <textarea
            id="output-text"
            class="textarea min-h-[200px] font-mono text-sm bg-gray-50 dark:bg-gray-900"
            readonly
            placeholder="결과가 여기에 표시됩니다..."
          ></textarea>
        </div>
      </div>

      <!-- Description Section -->
      <section class="mt-8 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
        <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-4">개행문자란?</h2>
        <div class="prose prose-gray dark:prose-invert max-w-none text-sm">
          <p>개행문자(Line Ending)는 텍스트 파일에서 줄의 끝을 나타내는 특수 문자입니다. 운영체제마다 서로 다른 개행문자 표준을 사용하기 때문에, 다른 운영체제에서 작성된 파일을 열 때 문제가 발생할 수 있습니다. 이 도구를 사용하여 다양한 개행문자 형식 간에 쉽게 변환할 수 있습니다.</p>

          <h3 class="text-lg font-semibold mt-6 mb-3">개행문자 종류</h3>
          <ul class="list-disc list-inside space-y-2">
            <li><strong>LF (Line Feed, \n)</strong>: Unix, Linux, macOS에서 사용하는 표준 개행문자입니다.</li>
            <li><strong>CRLF (Carriage Return + Line Feed, \r\n)</strong>: Windows에서 사용하는 개행문자입니다.</li>
            <li><strong>CR (Carriage Return, \r)</strong>: 클래식 Mac OS(버전 9 이전)에서 사용하던 개행문자입니다.</li>
          </ul>

          <h3 class="text-lg font-semibold mt-6 mb-3">사용 방법</h3>
          <ol class="list-decimal list-inside space-y-2">
            <li>입력창에 변환할 텍스트를 붙여넣거나 입력합니다.</li>
            <li>'형식 감지' 버튼을 클릭하여 현재 개행문자 형식을 확인합니다.</li>
            <li>원하는 변환 형식 버튼(LF, CRLF, CR)을 클릭합니다.</li>
            <li>변환된 결과를 '복사' 버튼으로 클립보드에 복사합니다.</li>
          </ol>

          <h3 class="text-lg font-semibold mt-6 mb-3">자주 묻는 질문</h3>
          <div class="space-y-4">
            <div>
              <h4 class="font-medium">Q: 왜 개행문자를 변환해야 하나요?</h4>
              <p>Windows에서 작성한 파일을 Linux 서버에 업로드하거나, Git에서 협업할 때 개행문자 불일치로 인해 문제가 발생할 수 있습니다. 예를 들어, 셸 스크립트가 실행되지 않거나 diff에서 불필요한 변경사항이 표시될 수 있습니다.</p>
            </div>
            <div>
              <h4 class="font-medium">Q: Mixed 형식은 무엇인가요?</h4>
              <p>하나의 파일에 여러 종류의 개행문자가 섞여 있는 상태를 말합니다. 이는 서로 다른 운영체제에서 파일을 편집했을 때 자주 발생하며, 일관성을 위해 하나의 형식으로 통일하는 것이 좋습니다.</p>
            </div>
            <div>
              <h4 class="font-medium">Q: 어떤 형식을 사용해야 하나요?</h4>
              <p>일반적으로 현대 프로젝트에서는 LF를 사용하는 것이 권장됩니다. Git의 기본 설정도 LF를 선호하며, 대부분의 코드 에디터와 IDE가 LF를 잘 지원합니다. Windows 전용 프로젝트인 경우 CRLF를 사용할 수 있습니다.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Ad Container (Bottom) -->
      <div class="ad-container mt-6">

      </div>
    </div>
  </main>

  <!-- Footer -->
  <div id="footer"></div>

  <!-- Tool Script -->
  <script>
    (function() {
      'use strict';

      const input = document.getElementById('input-text');
      const output = document.getElementById('output-text');
      const detectBtn = document.getElementById('detect-btn');
      const convertLfBtn = document.getElementById('convert-lf');
      const convertCrlfBtn = document.getElementById('convert-crlf');
      const convertCrBtn = document.getElementById('convert-cr');
      const copyBtn = document.getElementById('copy-btn');
      const clearBtn = document.getElementById('clear-btn');
      const currentFormat = document.getElementById('current-format');
      const lineCount = document.getElementById('line-count');
      const inputSize = document.getElementById('input-size');
      const outputSize = document.getElementById('output-size');
      const outputFormat = document.getElementById('output-format');
      const fileInput = document.getElementById('file-input');
      const sampleLfBtn = document.getElementById('sample-lf');
      const sampleCrlfBtn = document.getElementById('sample-crlf');
      const sampleCrBtn = document.getElementById('sample-cr');
      const sampleMixedBtn = document.getElementById('sample-mixed');

      // Store raw text (bypassing textarea normalization)
      let rawInputText = '';

      // Detect line ending format
      function detectLineEnding(text) {
        if (!text) return { format: '-', lines: 0 };

        const hasCRLF = text.includes('\r\n');
        const hasCR = text.includes('\r') && !hasCRLF;
        const hasLF = text.includes('\n') && !hasCRLF;

        // Check for mixed after removing CRLF
        const textWithoutCRLF = text.replace(/\r\n/g, '');
        const hasMixedCR = textWithoutCRLF.includes('\r');
        const hasMixedLF = textWithoutCRLF.includes('\n');

        let format;
        if (hasCRLF && (hasMixedCR || hasMixedLF)) {
          format = 'Mixed';
        } else if (hasCRLF) {
          format = 'CRLF';
        } else if (hasCR && hasLF) {
          format = 'Mixed';
        } else if (hasCR) {
          format = 'CR';
        } else if (hasLF) {
          format = 'LF';
        } else {
          format = '-';
        }

        // Count lines
        let lines = 1;
        if (hasCRLF || hasLF || hasCR) {
          const normalized = text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
          lines = normalized.split('\n').length;
        }

        return { format, lines };
      }

      // Normalize all line endings to LF first
      function normalizeToLF(text) {
        return text.replace(/\r\n/g, '\n').replace(/\r/g, '\n');
      }

      // Convert to specific format
      function convertTo(text, targetFormat) {
        const normalized = normalizeToLF(text);
        switch (targetFormat) {
          case 'LF':
            return normalized;
          case 'CRLF':
            return normalized.replace(/\n/g, '\r\n');
          case 'CR':
            return normalized.replace(/\n/g, '\r');
          default:
            return text;
        }
      }

      // Get current text (prefer rawInputText if available)
      function getCurrentText() {
        return rawInputText || input.value;
      }

      // Update stats
      function updateStats() {
        const text = getCurrentText();
        const { format, lines } = detectLineEnding(text);
        currentFormat.textContent = format;
        lineCount.textContent = lines;
        inputSize.textContent = formatBytes(new Blob([text]).size);

        // Update format badge color
        currentFormat.className = 'px-2 py-0.5 text-sm font-medium rounded';
        if (format === 'Mixed') {
          currentFormat.classList.add('bg-yellow-100', 'dark:bg-yellow-900/30', 'text-yellow-700', 'dark:text-yellow-400');
        } else if (format === 'LF') {
          currentFormat.classList.add('bg-green-100', 'dark:bg-green-900/30', 'text-green-700', 'dark:text-green-400');
        } else if (format === 'CRLF') {
          currentFormat.classList.add('bg-blue-100', 'dark:bg-blue-900/30', 'text-blue-700', 'dark:text-blue-400');
        } else if (format === 'CR') {
          currentFormat.classList.add('bg-purple-100', 'dark:bg-purple-900/30', 'text-purple-700', 'dark:text-purple-400');
        } else {
          currentFormat.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
        }
      }

      // Handle conversion
      function handleConvert(targetFormat) {
        const text = getCurrentText();
        if (!text.trim()) {
          toast.warning('변환할 텍스트를 입력하세요.');
          return;
        }

        const result = convertTo(text, targetFormat);
        output.value = result;
        outputSize.textContent = formatBytes(new Blob([result]).size);

        outputFormat.textContent = targetFormat;
        outputFormat.classList.remove('hidden');

        toast.success(targetFormat + ' 형식으로 변환되었습니다.');
      }

      // Set raw text (for file load and samples)
      function setRawText(text, source) {
        rawInputText = text;
        // Display normalized version in textarea (for visual)
        input.value = normalizeToLF(text);
        updateStats();
        if (source) {
          toast.success(source + ' 로드 완료');
        }
      }

      // File input handler
      fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (event) => {
          setRawText(event.target.result, file.name);
        };
        reader.onerror = () => {
          toast.error('파일을 읽을 수 없습니다.');
        };
        reader.readAsText(file);
        fileInput.value = ''; // Reset for same file selection
      });

      // Sample button handlers
      sampleLfBtn.addEventListener('click', () => {
        const sample = "Line 1 - Hello\nLine 2 - World\nLine 3 - LF Sample\nLine 4 - Unix/Linux/Mac";
        setRawText(sample, 'LF 샘플');
      });

      sampleCrlfBtn.addEventListener('click', () => {
        const sample = "Line 1 - Hello\r\nLine 2 - World\r\nLine 3 - CRLF Sample\r\nLine 4 - Windows";
        setRawText(sample, 'CRLF 샘플');
      });

      sampleCrBtn.addEventListener('click', () => {
        const sample = "Line 1 - Hello\rLine 2 - World\rLine 3 - CR Sample\rLine 4 - Old Mac";
        setRawText(sample, 'CR 샘플');
      });

      sampleMixedBtn.addEventListener('click', () => {
        const sample = "Line 1 - LF ending\nLine 2 - CRLF ending\r\nLine 3 - CR ending\rLine 4 - Mixed sample";
        setRawText(sample, 'Mixed 샘플');
      });

      // Event listeners - clear rawInputText when user types manually
      input.addEventListener('input', () => {
        rawInputText = ''; // Clear raw text when user types
        updateStats();
      });

      detectBtn.addEventListener('click', () => {
        updateStats();
        const format = currentFormat.textContent;
        if (format === '-') {
          toast.info('입력된 텍스트가 없습니다.');
        } else {
          toast.info('현재 형식: ' + format);
        }
      });

      convertLfBtn.addEventListener('click', () => handleConvert('LF'));
      convertCrlfBtn.addEventListener('click', () => handleConvert('CRLF'));
      convertCrBtn.addEventListener('click', () => handleConvert('CR'));

      copyBtn.addEventListener('click', async () => {
        if (!output.value) {
          toast.warning('복사할 내용이 없습니다.');
          return;
        }
        await copyToClipboard(output.value);
        toast.success('클립보드에 복사되었습니다.');
      });

      clearBtn.addEventListener('click', () => {
        input.value = '';
        output.value = '';
        rawInputText = ''; // Clear raw text
        inputSize.textContent = '';
        outputSize.textContent = '';
        outputFormat.classList.add('hidden');
        currentFormat.textContent = '-';
        currentFormat.className = 'px-2 py-0.5 text-sm font-medium rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300';
        lineCount.textContent = '0';
        input.focus();
      });

      function formatBytes(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
      }

      // Initial state
      updateStats();
    })();
  </script>
</body>
</html>
