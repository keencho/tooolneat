<!DOCTYPE html>
<html lang="ko">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8846557285079359"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>룰렛 돌리기 - Toolneat</title>
  <meta name="description" content="온라인 룰렛을 돌려 랜덤으로 선택하는 도구입니다. 점심 메뉴 정하기, 팀원 순서 정하기, 당첨자 추첨, 벌칙 정하기 등에 활용하세요. 항목을 자유롭게 추가/삭제할 수 있고, 각 항목의 당첨 확률을 조절할 수도 있습니다.">

  <!-- Canonical & hreflang -->
  <link rel="canonical" href="https://toolneat.com/tools/life/roulette/">
  <link rel="alternate" hreflang="ko" href="https://toolneat.com/tools/life/roulette/">
  <link rel="alternate" hreflang="en" href="https://toolneat.com/en/tools/life/roulette/">
  <link rel="alternate" hreflang="x-default" href="https://toolneat.com/tools/life/roulette/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Toolneat">
  <meta property="og:title" content="룰렛 돌리기 - Toolneat">
  <meta property="og:description" content="랜덤 선택을 위한 룰렛을 돌려보세요.">
  <meta property="og:url" content="https://toolneat.com/tools/life/roulette/">
  <meta property="og:image" content="https://toolneat.com/assets/images/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#2563eb">

  <!-- Favicon -->
  <!-- CSS -->
    <link rel="icon" href="/favicon.ico" sizes="48x48">
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="stylesheet" href="../../../assets/css/output.css">

  <!-- JS -->
  <script src="../../../assets/js/common.js"></script>
  <script src="../../../assets/js/i18n.js"></script>
  <script src="../../../assets/js/components.js"></script>

  <style>
    .wheel-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem 1rem;
      background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 1rem;
      margin-bottom: 1.5rem;
    }
    .dark .wheel-section {
      background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
    }

    .wheel-container {
      position: relative;
      width: 280px;
      height: 280px;
      margin-bottom: 1.5rem;
    }
    @media (min-width: 640px) {
      .wheel-container {
        width: 350px;
        height: 350px;
      }
    }

    .wheel-canvas {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      box-shadow: 0 0 0 8px #374151, 0 8px 32px rgba(0,0,0,0.3);
    }
    .dark .wheel-canvas {
      box-shadow: 0 0 0 8px #4b5563, 0 8px 32px rgba(0,0,0,0.5);
    }

    .pointer {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 18px solid transparent;
      border-right: 18px solid transparent;
      border-top: 35px solid #ef4444;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
      z-index: 10;
    }

    .spin-btn {
      background: linear-gradient(145deg, #3b82f6, #2563eb);
      color: white;
      font-size: 1.25rem;
      font-weight: 700;
      padding: 1rem 3rem;
      border-radius: 9999px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(59, 130, 246, 0.4);
      transition: all 0.3s ease;
    }
    .spin-btn:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
    }
    .spin-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .result-box {
      background: linear-gradient(145deg, #10b981, #059669);
      color: white;
      padding: 1.5rem 2rem;
      border-radius: 1rem;
      text-align: center;
      animation: resultPop 0.5s ease;
      margin-top: 1.5rem;
    }
    @keyframes resultPop {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); opacity: 1; }
    }

    .item-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      background: #f3f4f6;
      border-radius: 0.5rem;
      font-size: 0.875rem;
    }
    .dark .item-tag {
      background: #374151;
    }
    .item-tag .remove-btn {
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ef4444;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 12px;
      line-height: 1;
    }
    .item-tag .remove-btn:hover {
      background: #dc2626;
    }

    .preset-btn {
      padding: 0.5rem 1rem;
      background: #e5e7eb;
      border: none;
      border-radius: 0.5rem;
      font-size: 0.75rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .dark .preset-btn {
      background: #374151;
      color: #e5e7eb;
    }
    .preset-btn:hover {
      background: #d1d5db;
    }
    .dark .preset-btn:hover {
      background: #4b5563;
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      pointer-events: none;
      z-index: 1000;
      animation: confettiFall 3s ease-out forwards;
    }
    @keyframes confettiFall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <div id="header"></div>

  <!-- Main Content -->
  <main class="flex-1 py-8 md:py-12">
    <div class="container-main">
      <!-- Page Title -->
      <div class="mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2">
          룰렛 돌리기
        </h1>
        <p class="text-gray-600 dark:text-gray-400">
          랜덤 선택을 위한 룰렛을 돌려보세요
        </p>
      </div>

      <!-- Tool Card -->
      <div class="card">
        <!-- Wheel Section (Top) -->
        <div class="wheel-section">
          <div class="wheel-container">
            <div class="pointer"></div>
            <canvas id="wheel-canvas" class="wheel-canvas"></canvas>
          </div>
          <button id="spin-btn" class="spin-btn" disabled>돌리기</button>
        </div>

        <!-- Result Display -->
        <div id="result-container" class="hidden">
          <div class="result-box">
            <p class="text-sm opacity-80 mb-1">결과</p>
            <p id="result-text" class="text-2xl font-bold"></p>
          </div>
        </div>

        <!-- Item Management Section (Bottom) -->
        <div class="mt-6">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">항목 관리</h3>

          <!-- Add Item -->
          <div class="flex gap-2 mb-4">
            <input
              type="text"
              id="item-input"
              class="input flex-1"
              placeholder="항목 입력 후 추가"
              maxlength="20"
            >
            <button id="add-btn" class="btn btn-primary">추가</button>
          </div>

          <!-- Item Tags -->
          <div id="items-container" class="flex flex-wrap gap-2 mb-4 min-h-[40px] p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
            <p id="empty-message" class="text-gray-400 text-sm">항목을 추가하세요 (최소 2개)</p>
          </div>

          <!-- Action Buttons -->
          <div class="flex gap-2 mb-4">
            <button id="clear-btn" class="btn btn-secondary">전체 삭제</button>
          </div>

          <!-- Presets -->
          <div>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">빠른 예제:</p>
            <div class="flex flex-wrap gap-2">
              <button class="preset-btn" data-items="짜장면,짬뽕,볶음밥,탕수육">음식 메뉴</button>
              <button class="preset-btn" data-items="1,2,3,4,5,6">숫자 1-6</button>
              <button class="preset-btn" data-items="가위,바위,보">가위바위보</button>
              <button class="preset-btn" data-items="예,아니오">예/아니오</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Description Section -->
      <section class="mt-8 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
        <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-4">룰렛 돌리기란?</h2>
        <div class="prose prose-gray dark:prose-invert max-w-none text-sm">
          <p>룰렛 돌리기는 여러 항목 중 하나를 무작위로 선택해야 할 때 사용하는 도구입니다. 점심 메뉴 정하기, 당첨자 추첨 등에 활용하세요.</p>

          <h3 class="text-lg font-semibold mt-6 mb-3">사용 방법</h3>
          <ol class="list-decimal list-inside space-y-2">
            <li>항목 입력창에 텍스트를 입력하고 '추가' 버튼을 클릭합니다</li>
            <li>최소 2개 이상의 항목을 추가하면 '돌리기' 버튼이 활성화됩니다</li>
            <li>'돌리기' 버튼을 클릭하면 룰렛이 회전합니다</li>
            <li>룰렛이 멈추면 결과가 표시됩니다</li>
          </ol>

          <h3 class="text-lg font-semibold mt-6 mb-3">자주 묻는 질문</h3>
          <div class="space-y-4">
            <div>
              <h4 class="font-medium">Q: 몇 개까지 항목을 추가할 수 있나요?</h4>
              <p>최대 12개까지 추가할 수 있습니다.</p>
            </div>
            <div>
              <h4 class="font-medium">Q: 결과는 정말 무작위인가요?</h4>
              <p>네, 완전히 무작위입니다. 각 항목이 선택될 확률은 동일합니다.</p>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <div id="footer"></div>

  <!-- Script -->
  <script>
    (function() {
      'use strict';

      const COLORS = [
        '#ef4444', '#f97316', '#eab308', '#22c55e', '#14b8a6', '#3b82f6',
        '#8b5cf6', '#ec4899', '#06b6d4', '#84cc16', '#f43f5e', '#6366f1'
      ];
      const MAX_ITEMS = 12;

      let items = [];
      let isSpinning = false;
      let currentRotation = 0;

      const canvas = document.getElementById('wheel-canvas');
      const ctx = canvas.getContext('2d');
      const spinBtn = document.getElementById('spin-btn');
      const itemInput = document.getElementById('item-input');
      const addBtn = document.getElementById('add-btn');
      const itemsContainer = document.getElementById('items-container');
      const emptyMessage = document.getElementById('empty-message');
      const clearBtn = document.getElementById('clear-btn');
      const resultContainer = document.getElementById('result-container');
      const resultText = document.getElementById('result-text');

      function initCanvas() {
        const container = canvas.parentElement;
        const size = Math.min(container.offsetWidth, container.offsetHeight);
        canvas.width = size * 2;
        canvas.height = size * 2;
        canvas.style.width = size + 'px';
        canvas.style.height = size + 'px';
        ctx.scale(2, 2);
        drawWheel();
      }

      function drawWheel() {
        const size = canvas.width / 2;
        const cx = size / 2;
        const cy = size / 2;
        const radius = size / 2 - 4;

        ctx.clearRect(0, 0, size, size);

        if (items.length === 0) {
          ctx.beginPath();
          ctx.arc(cx, cy, radius, 0, Math.PI * 2);
          ctx.fillStyle = '#e5e7eb';
          ctx.fill();
          ctx.fillStyle = '#9ca3af';
          ctx.font = 'bold 16px sans-serif';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText('항목을 추가하세요', cx, cy);
          return;
        }

        const sliceAngle = (Math.PI * 2) / items.length;

        items.forEach((item, i) => {
          const startAngle = i * sliceAngle - Math.PI / 2;
          const endAngle = startAngle + sliceAngle;

          // Draw slice
          ctx.beginPath();
          ctx.moveTo(cx, cy);
          ctx.arc(cx, cy, radius, startAngle, endAngle);
          ctx.closePath();
          ctx.fillStyle = COLORS[i % COLORS.length];
          ctx.fill();
          ctx.strokeStyle = '#fff';
          ctx.lineWidth = 2;
          ctx.stroke();

          // Draw text
          ctx.save();
          ctx.translate(cx, cy);
          ctx.rotate(startAngle + sliceAngle / 2);
          ctx.textAlign = 'right';
          ctx.textBaseline = 'middle';
          ctx.fillStyle = '#fff';
          ctx.font = 'bold 14px sans-serif';

          let text = item.length > 8 ? item.slice(0, 7) + '…' : item;
          ctx.fillText(text, radius - 15, 0);
          ctx.restore();
        });

        // Center circle
        ctx.beginPath();
        ctx.arc(cx, cy, 20, 0, Math.PI * 2);
        ctx.fillStyle = '#1f2937';
        ctx.fill();
      }

      function updateUI() {
        // Update items display
        itemsContainer.innerHTML = '';
        if (items.length === 0) {
          emptyMessage.style.display = 'block';
          itemsContainer.appendChild(emptyMessage);
        } else {
          emptyMessage.style.display = 'none';
          items.forEach((item, i) => {
            const tag = document.createElement('div');
            tag.className = 'item-tag';
            tag.innerHTML = `
              <span style="color: ${COLORS[i % COLORS.length]}; font-weight: 600;">${escapeHtml(item)}</span>
              <button class="remove-btn" data-index="${i}">&times;</button>
            `;
            itemsContainer.appendChild(tag);
          });
        }

        // Update spin button
        spinBtn.disabled = items.length < 2 || isSpinning;

        // Redraw wheel
        drawWheel();
      }

      function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }

      function addItem(text) {
        const trimmed = text.trim();
        if (!trimmed) return;
        if (items.length >= MAX_ITEMS) {
          toast.warning(`최대 ${MAX_ITEMS}개까지 추가할 수 있습니다.`);
          return;
        }
        if (items.includes(trimmed)) {
          toast.warning('이미 추가된 항목입니다.');
          return;
        }
        items.push(trimmed);
        updateUI();
      }

      function removeItem(index) {
        items.splice(index, 1);
        updateUI();
      }

      function spin() {
        if (items.length < 2 || isSpinning) return;

        isSpinning = true;
        spinBtn.disabled = true;
        resultContainer.classList.add('hidden');

        // Random winning index
        const winningIndex = Math.floor(Math.random() * items.length);
        const sliceAngle = 360 / items.length;

        // Calculate target rotation
        // The wheel rotates clockwise, pointer is at top (12 o'clock)
        // Slice i center is at: i * sliceAngle + sliceAngle/2 degrees from starting position
        // To have slice i under the pointer after rotation, we need to rotate by (360 - targetSliceCenter)
        const targetSliceCenter = winningIndex * sliceAngle + sliceAngle / 2;
        const targetRotation = 360 - targetSliceCenter;

        // Account for current rotation
        const currentAngle = currentRotation % 360;
        let adjustment = targetRotation - currentAngle;
        if (adjustment < 0) adjustment += 360;

        // Add extra spins (5-7 full rotations)
        const extraSpins = 5 + Math.floor(Math.random() * 3);
        const totalRotation = extraSpins * 360 + adjustment;

        currentRotation += totalRotation;

        canvas.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
        canvas.style.transform = `rotate(${currentRotation}deg)`;

        setTimeout(() => {
          isSpinning = false;
          spinBtn.disabled = false;

          const winner = items[winningIndex];
          resultText.textContent = winner;
          resultContainer.classList.remove('hidden');

          createConfetti();
        }, 4100);
      }

      function createConfetti() {
        const colors = ['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6', '#8b5cf6'];
        for (let i = 0; i < 40; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.top = '-10px';
          confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          if (Math.random() > 0.5) confetti.style.borderRadius = '50%';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 4000);
        }
      }

      // Event Listeners
      addBtn.addEventListener('click', () => {
        addItem(itemInput.value);
        itemInput.value = '';
        itemInput.focus();
      });

      itemInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          addItem(itemInput.value);
          itemInput.value = '';
        }
      });

      itemsContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('remove-btn')) {
          removeItem(parseInt(e.target.dataset.index));
        }
      });

      clearBtn.addEventListener('click', () => {
        items = [];
        currentRotation = 0;
        canvas.style.transition = 'none';
        canvas.style.transform = 'rotate(0deg)';
        resultContainer.classList.add('hidden');
        updateUI();
      });

      spinBtn.addEventListener('click', spin);

      document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          items = btn.dataset.items.split(',');
          currentRotation = 0;
          canvas.style.transition = 'none';
          canvas.style.transform = 'rotate(0deg)';
          resultContainer.classList.add('hidden');
          updateUI();
        });
      });

      // Initialize
      window.addEventListener('load', initCanvas);
      window.addEventListener('resize', () => setTimeout(initCanvas, 100));
      updateUI();
    })();
  </script>
</body>
</html>
